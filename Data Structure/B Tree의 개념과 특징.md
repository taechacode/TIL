# B Tree의 개념과 특징
<br/>

## 이진 탐색 트리 (BST)
<br/>

![이진탐색트리 BST](https://github.com/taechacode/TIL/assets/63395751/eb65765d-eb9a-4760-adae-44697acc09a5)
<br/><br/>

- 모든 노드의 왼쪽 서브 트리는 해당 노드의 값보다 작은 값들만 가진다.
- 모든 노드의 오른쪽 서브 트리는 해당 노드의 값보다 큰 값들만 가진다.
- 이진 탐색 트리에서 자녀 노드는 최대 2개까지만 허용된다.
- 위와 같은 트리를 `이진 탐색 트리`라고 한다.
<br/>

## 자녀 노드를 3개 이상 가지게 만들려면?
<br/>

![이진탐색트리 자녀노드](https://github.com/taechacode/TIL/assets/63395751/8d5b27c7-dc60-4828-9c59-b5428a44287c)
<br/><br/>

- 만약 자녀 노드를 3개 이상으로 하고 싶다면?
- 이진 탐색 트리에서 적용되었던 원리를 자녀 노드가 3개인 트리에 적용시키면 위 그림의 오른쪽 트리와 같이 된다.
- 왼쪽 서브 트리의 값은 k1보다 작은 값을, 중간 서브 트리의 값은 k1보다는 크고 k2보다는 작은 값을, 오른쪽 서브 트리의 값은 k2보다 큰 값을 가지게 된다.
- 부모 노드는 2개의 키 값(k1, k2)을 가져야 한다.
- 만약 k1과 k2가 각각 50과 80이라면 왼쪽 서브 트리의 값은 50보다 작은 값을, 중간 서브 트리의 값은 50보다는 크고 80보다는 작은 값을, 오른쪽 서브 트리의 값은 80보다 큰 값을 가지게 된다.
<br/>

## B Tree의 특징
<br/>

- 자녀 노드의 최대 개수를 늘리기 위해서 부모 노드에 key를 하나 이상 저장한다.
- 부모 모드의 key들을 오름차순으로 정렬한다.
- 정렬된 순서에 따라 자녀 노드들의 key 값의 범위가 결정된다.
- 위와 같은 트리를 `B Tree`라고 한다.
<br/>

## B Tree의 주요 4가지 파라미터
<br/>

- 최대 몇 개의 자녀 노드를 가질 것인지가 B Tree를 사용할 때 중요한 파라미터가 된다.
<br/>

- `M` : 각 노드의 최대 자녀 노드 수
  - 최대 M개의 자녀를 가질 수 있는 B Tree를 M차 B Tree라고 부른다.
  - 만약 가질 수 있는 자녀 노드가 최대 3개라면 3차 B Tree가 된다.
- `M - 1` : 각 노드의 최대 key 수
  - key(앞 문단에서 k1, k2)는 자녀 노드의 범위를 정하는 데 사용된다. 그래서 항상 자녀 노드 수에 비해 1개가 모자르다.
- `⌈ M/2 ⌉` : 각 노드의 최소 자녀 노드 수
  - 만약 3차 B Tree의 경우, 3 / 2 = 1.5이지만 올림을 통해 2가 된다.
  - 단, 이 조건은 루트 노드(root node)와 리프 노드(leaf node)는 제외한다.
- `⌈ M/2 ⌉ - 1` : 각 노드의 최소 key 수
  - 단, 이 조건은 루트 노드(root node)는 제외한다.
<br/>

## B Tree 노드의 key 수와 자녀 수의 관계
<br/>

![불가능한 B Tree 구조](https://github.com/taechacode/TIL/assets/63395751/65785442-f85b-48be-80bd-1faa9f30eb88)
<br/><br/>

- [불가능한 B Tree 구조1]이 불가능한 이유는 internal 노드의 key 수가 x개라면 자녀 노드의 수는 언제나 x+1개이기 때문이다.
- [불가능한 B Tree 구조2]이 불가능한 이유 또한 [불가능한 B Tree 구조1]과 동일하다.
<br/>

- (M차 B Tree가 정해지든 안 정해지든) 노드가 최소 하나의 key는 가지기 때문에 몇 차 B Tree인지와 상관없이 internal 노드는 최소 2개의 자녀 노드를 가진다.
- (M차 B Tree가 정해졌을 경우에는)  M(각 노드의 최대 자녀 노드 수)이 정해지면 root 노드를 제외하고 internal 노드는 최소 ⌈ M/2 ⌉개의 자녀 노드를 가질 수 있게 된다.
  - 만약 5차 B Tree라면 최소 3개(2.5에서 올림)의 자녀 노드를 가질 수 있게 된다.
