&nbsp;클라이언트에서 요청이 들어왔을 때 이를 처리해주는 것은 쓰레드.<br/>
&nbsp;그런데 이 쓰레드를 요청 시마다 생성하면<br/>
1. 요청이 올 때마다 쓰레드를 생성하면, 생성하는 데 소요되는 시간 때문에 응답 시간이 늦어짐
2. 컨텍스트 스위칭 비용 발생 (이전 작업 내역 불러오기 등)
3. 요청이 너무 많이 들어와서 쓰레드 생성을 너무 많이 하면 메모리 임계점 초과로 서버가 죽을 수 있음
3가지 문제점이 발생할 수 있다.

&nbsp;그래서 작금의 WAS는 쓰레드 풀을 만들어서 미리 쓰레드들을 만들어놓고 요청이 올 때마다 빌려주고, 응답 이후에는 반납하는 방식으로 관리.<br/>
&nbsp;쓰레드가 미리 생성되어 있으므로 생성하고 종료하는 CPU 비용이 절약되고 응답 시간이 빠르다.<br/>
&nbsp;또한 많은 요청이 들어오더라도 쓰레드 최대치가 이미 설정되어 있으므로, 초과 요청은 거절하거나 대기시키고 기존 요청은 안전하게 처리 가능하다.<br/><br/>

&nbsp;WAS의 주요 튜닝 포인트는 최대 쓰레드(max thread) 개수이다.<br/>
&nbsp;값을 너무 낮게 설정하면? 동시 요청이 많으면, 서버 리소스는 여유롭지만 클라이언트 입장에서는 응답 지연이 자주 발생한다.<br/>
(CPU를 5% 밖에 사용하지 않는다던가... 50%는 사용해도 무방)<br/>
&nbsp;값을 너무 높게 설정하면? 동시 요청이 많으면, CPU 메모리 리소스 임계점 초과로 서버가 죽음.<br/><br/>

&nbsp;쓰레드 풀의 적정 숫자는 애플리케이션 로직의 복잡도, CPU, 메모리, IO 리소스 상황에 따라 모두 다름.<br/>
&nbsp;성능 테스트 도구는 아파치 ab, 제이미터, nGrinder 등이 있음.<br/><br/>

&nbsp;그렇다면 현재 퇴직연금시스템에서 쓰고 있는 JEUS(EJB) 서버의 경우에는 어떻게 관리할까?<br/><br/>

&nbsp;티맥스소프트 문서에 따르면 jeus-ejb-dd.xml 파일의 <thread-max></thread-max>에서 개수를 확인 가능함.<br/>
톰캣의 경우는 100개이고, JEUS 또한 기본값은 100개로 설정되어 있음.<br/>
&nbsp;JEUS의 경우 쓰레드 풀에서 제공 가능한 쓰레드 개수를 초과한 요청이 들어올 경우, 먼저 진행 중인 작업이 끝내고 쓰레드 풀로 쓰레드가 반환될 때까지 대기한다.<br/>
&nbsp;대기한 지 10분이 지난 요청의 경우 시간 초과로 RemoteException 예외를 발생시킨다.
